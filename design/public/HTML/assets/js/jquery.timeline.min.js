/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * 
 *
 * Youxi v1.1 - Timeline Plugin Script
 *
 * This file is part of Youxi, a HTML5 Business Theme build for sale at ThemeForest.
 * For questions, suggestions or support request, please mail me at maimairel@yahoo.com
 *
 * Development Started:
 * March 26, 2013
 *
 * Heavily Enhanced and Modified from Timeline Plugin for jQuery by Jakob Ploens <post@jakobploens.de>
 *
 **/

;(function(g){var b=function(c,a){arguments&&this.init(c,a)};b.monthNames="January February March April May June July August September October November December".split(" ");b.monthNamesShort="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ");b.dayNames="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" ");b.dayNamesShort="Sun Mon Tue Wed Thu Fri Sat".split(" ");b.FN={_toDateObject:function(c){if(!c||""===c)return!1;var a,b;a=c.toString().split("-");c=a[0]?a[0]:"1970";b=a[1]?parseInt(a[1],10)-1:0;a=a[2]?parseInt(a[2],10):1;return new Date(c,b,a)},_round:function(c,a){var b;isNaN(c)?b=parseInt(c+0.5):a?(a=Math.pow(10,a),b=Math.round(c*a)/a):b=Math.round(c);return b},_formatDate:function(c,a,e){var j=a.split("-"),g=!!j[2],r=!!j[1],j=!!j[0];a=b.FN._toDateObject(a);var d,k=e&&e.dayNamesShort||b.dayNamesShort,h=e&&e.dayNames||b.dayNames,f=e&&e.monthNamesShort||b.monthNamesShort;e=e&&e.monthNames||b.monthNames;var l=function(a,b){var e=d+1<c.length&&c.charAt(d+1)===a;e&&b&&d++;return e},s=function(a,b,c){b=""+b;if(l(a,!0))for(;b.length<c;)b="0"+b;return b},t=function(b,a,c,d){return l(b,!0)?d[a]:c[a]},m=[],q,n,p;if(a)for(d=0;d<c.length;d++)switch(c.charAt(d)){case "d":g&&m.push(s("d",a.getDate(),2));break;case "D":g&&m.push(t("D",a.getDay(),k,h));break;case "m":r&&m.push(s("m",a.getMonth()+1,2));break;case "M":r&&m.push(t("M",a.getMonth(),f,e));break;case "y":j&&m.push(l("y",!0)?a.getFullYear():(10>a.getYear()%100?"0":"")+a.getYear()%100);break;default:q="";for(p=n=!1;d<c.length&&!p;){if(l("d")||l("D"))p=!0,g&&(n=!0);if(l("m")||l("M"))p=!0,r&&(n=!0);l("y")&&(p=!0,j&&(n=!0));q+=c.charAt(d);n||d++}n&&m.length&&m.push(q)}return m.join("")}};g.timeline=b;b.prototype={defaults:{spacingUnit:"px",spacing:4,dateFormat:"MM dd, yy",itemSelector:" > ul > li"},init:function(b,a){this.element=g(b);this.options=g.extend(!0,{},this.defaults,a);this.items=g(this.options.itemSelector,this.element);this.build()},build:function(){if(this.items.length){var c=this,a=this.items.first().data("date"),e=this.items.last().data("date"),j;a&&e&&(j=b.FN._toDateObject(e).getTime()-b.FN._toDateObject(a).getTime()||!1);this.element.addClass("timeline").prepend('<div class="line"></div>');g.each(this.items,function(a,e){var d,k,h,f;d=g(e);k=d.data("date").toString();h=d.data("dateFormat")||c.options.dateFormat;f=b.FN._toDateObject(k);d.addClass(a%2?"odd":"even");k=d.data("title")?d.data("title"):d.data("end")?b.FN._formatDate(h,k)+"-"+b.FN._formatDate(h,d.data("end")):b.FN._formatDate(h,k);0<a&&j&&(h=d.prev("li"),h=h.data("end")||h.data("date"),f=f.getTime()-b.FN._toDateObject(h).getTime(),f=100*(f/j),f*=c.options.spacing,f="em"===c.options.spacingUnit?b.FN._round(0.1*f,2):b.FN._round(f),d.css("margin-top",f+c.options.spacingUnit));d.prepend('<span class="bullet"><span></span></span>');d.prepend('<span class="date">'+k+"</span>")})}}};g.fn.timeline=function(c){return this.each(function(){new b(this,c)})}})(jQuery,window,document);