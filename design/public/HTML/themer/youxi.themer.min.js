/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * 
 *
 * Youxi v1.1 - Themer Script
 *
 * This file is part of Youxi, a HTML5 Business Theme build for sale at ThemeForest.
 * For questions, suggestions or support request, please mail me at maimairel@yahoo.com
 *
 * Development Started:
 * March 26, 2013
 *
 */

;(function(a,h,e){var c=function(b,d){this.options=a.extend(!0,{},b);this.getLESS(function(){this.build();a.isFunction(d)&&d.apply(this)});return this};c.colors="#EF5C2C #FF8C21 #E8C500 #D13D3D #C94949 #E0268C #D68DBB #C149ED #51C242 #A0BA52 #A7CC39 #48BDAF #169FE6 #6388ED".split(" ");c.backgrounds=[{w:200,h:200,url:"assets/img/bg/debut_light.png",url2x:"assets/img/bg/debut_light_@2X.png"},{w:410,h:410,url:"assets/img/bg/fabric_of_squares_gray.png",url2x:"assets/img/bg/fabric_of_squares_gray_@2X.png"},{w:400,h:355,url:"assets/img/bg/frenchstucco.png",url2x:"assets/img/bg/frenchstucco_@2X.png"},{w:600,h:600,url:"assets/img/bg/furley_bg.png",url2x:"assets/img/bg/furley_bg_@2X.png"},{w:188,h:178,url:"assets/img/bg/gplaypattern.png",url2x:"assets/img/bg/gplaypattern_@2X.png"},{w:397,h:322,url:"assets/img/bg/grey.png",url2x:"assets/img/bg/grey_@2X.png"},{w:190,h:191,url:"assets/img/bg/light_wool.png",url2x:"assets/img/bg/light_wool_@2X.png"},{w:46,h:23,url:"assets/img/bg/pw_maze_white.png",url2x:"assets/img/bg/pw_maze_white_@2X.png"},{w:200,h:200,url:"assets/img/bg/retina_dust.png",url2x:"assets/img/bg/retina_dust_@2X.png"},{w:252,h:230,url:"assets/img/bg/square_bg.png",url2x:"assets/img/bg/square_bg_@2X.png"},{w:16,h:16,url:"assets/img/bg/striped_lens.png",url2x:"assets/img/bg/striped_lens_@2X.png"},{w:400,h:400,url:"assets/img/bg/subtle_grunge.png",url2x:"assets/img/bg/subtle_grunge_@2X.png"},{w:26,h:26,url:"assets/img/bg/tiny_grid.png",url2x:"assets/img/bg/tiny_grid_@2X.png"}];c.markup='<div class="youxi-themer"><div class="toggle-btn"><i class="icon-cogwheels"></i></div><div class="form"><div class="form-row"><label class="form-label">Pick a Color</label><ul class="theme-list form-list"><li><input type="text" class="color-picker"></li></ul></div><div class="form-row"><label class="form-label">Background Image</label><ul class="bg-list form-list"></ul></div><div class="form-row"><label class="form-label">Layout Mode</label><ul class="inline form-list"><li><label><input type="radio" name="mode[]" data-layout-mode="wide"> Wide</label></li><li><label><input type="radio" name="mode[]" data-layout-mode="boxed"> Boxed</label></li></ul></div><div class="button-row"><button id="css-btn" type="button" class="btn">Get CSS</button></div></div><div class="css-modal"><div class="ow-overlay ow-closed"></div><div class="modal ow-closed"><textarea readonly></textarea></div></div></div>';c.prototype={getLESS:function(b){var d=this;a.get(this.options.lessFile,function(c){d.lessData=c.toString();a.isFunction(b)&&b.apply(d)})},modifyVars:function(b){var a="";for(name in b)a+=("@"===name.slice(0,1)?"":"@")+name+": "+(";"===b[name].slice(-1)?b[name]:b[name]+";");return this.lessData+a},refresh:function(b){var d=this;this.lessParser.parse(this.modifyVars({"@themeColor":this.selectedColor,"@bodyBackground":'"'+c.backgrounds[this.selectedBg].url+'"',"@bodyBackgroundRetina":'"'+c.backgrounds[this.selectedBg].url2x+'"',"@bodyBackgroundWidth":c.backgrounds[this.selectedBg].w+"px","@bodyBackgroundHeight":c.backgrounds[this.selectedBg].h+"px"}),function(c,j){c&&console.error(c);d.activeCSS=j.toCSS();d.cssTextarea.val(d.activeCSS);if(!b){var f=d.activeCSS,g=e.getElementById("youxi-theme-css");g||(g=e.createElement("style"),g.setAttribute("type","text/css"),g.id="youxi-theme-css",a("body").append(g));g.styleSheet?g.styleSheet.cssText=f:g.innerHTML=f}})},init:function(){var b=this;a.fn.omniWindow&&this.modalWindow.omniWindow();a("[data-layout-mode]",this.element).each(function(){a(this).prop("checked","wide"===a(this).data("layout-mode")===a("body").hasClass("wide"))}).on("change",function(){a("body").toggleClass("wide","wide"===a(this).data("layout-mode"));a(h).trigger("resize")});this.themeList.on("click","li[data-color]",function(){b.selectedColor=a(this).data("color");b.refresh()});this.bgList.on("click","li",function(){b.selectedBg=a(this).data("bg-index");b.refresh()});this.pickerElement=a(".color-picker",this.element).minicolors({letterCase:"uppercase",textfield:!1,change:function(a){a&&(b.selectedColor=a.toString());b.refresh()}});a(".toggle-btn",this.element).on("click",function(){b[b.element.is(".hidden")?"show":"hide"]()});a("#css-btn",this.element).on("click",function(){b.modalWindow.trigger("show")});this.hide(!0);this.refresh(!0)},build:function(){a.miniColors&&console.error("Themer requires miniColors");"undefined"===typeof less?console.error("Themer requires LESS"):this.lessParser=new less.Parser;this.element=a(c.markup);this.selectedColor=c.colors[0];this.selectedBg=9;this.themeList=a(".theme-list",this.element);this.bgList=a(".bg-list",this.element);this.modalWindow=a(".css-modal .modal",this.element);this.cssTextarea=a("textarea",this.modalWindow);a.each(c.colors,a.proxy(function(b,d){a("<li></li>").attr("data-color",d).append(a("<span></span>").css("background-color",d)).appendTo(this.themeList)},this));a.each(c.backgrounds,a.proxy(function(b,d){var c=a("<span></span>").css({"background-image":"url("+(1<h.devicePixelRatio?d.url2x:d.url)+")","background-size":[d.w+"px",d.h+"px"].join(" ")});a("<li></li>").attr("data-bg-index",b).append(c).appendTo(this.bgList)},this))},show:function(){this.element.animate({left:0},function(){a(this).removeClass("hidden")})},hide:function(b){b?this.element.css("left",-this.element.outerWidth()+"px").addClass("hidden"):this.element.animate({left:-this.element.outerWidth()+"px"},function(){a(this).addClass("hidden")})}};a(e).ready(function(){new c({lessFile:"themer/less/theme.less"},function(){a("body").prepend(this.element);this.init()})});a.fn.extend({omniWindow:function(b){b=a.extend(!0,{animationsPriority:{show:["overlay","modal"],hide:["modal","overlay"]},overlay:{selector:".ow-overlay",hideClass:"ow-closed",animations:{show:function(b,a){return a(b)},hide:function(b,a){return a(b)},internal:{show:function(a){a.overlay.removeClass(b.overlay.hideClass)},hide:function(a){a.overlay.addClass(b.overlay.hideClass)}}}},modal:{hideClass:"ow-closed",animations:{show:function(b,a){return a(b)},hide:function(b,a){return a(b)},internal:{show:function(a){a.modal.removeClass(b.modal.hideClass)},hide:function(a){a.modal.addClass(b.modal.hideClass)}}},internal:{stateAttribute:"ow-active"}},eventsNames:{show:"show.ow",hide:"hide.ow",internal:{overlayClick:"click.ow",keyboardKeyUp:"keyup.ow"}},callbacks:{beforeShow:function(b,a){return a(b)},positioning:function(b,a){return a(b)},afterShow:function(b,a){return a(b)},beforeHide:function(b,a){return a(b)},afterHide:function(b,a){return a(b)},internal:{beforeShow:function(a){if(a.modal.data(b.modal.internal.stateAttribute))return!1;a.modal.data(b.modal.internal.stateAttribute,!0);return!0},afterShow:function(j){a(e).on(b.eventsNames.internal.keyboardKeyUp,function(a){27===a.keyCode&&j.modal.trigger(b.eventsNames.hide)});j.overlay.on(b.eventsNames.internal.overlayClick,function(){j.modal.trigger(b.eventsNames.hide)})},positioning:function(a){a.modal.css("margin-left",Math.round(a.modal.outerWidth()/-2))},beforeHide:function(a){return a.modal.data(b.modal.internal.stateAttribute)?(a.modal.data(b.modal.internal.stateAttribute,!1),!0):!1},afterHide:function(c){c.overlay.off(b.eventsNames.internal.overlayClick);a(e).off(b.eventsNames.internal.keyboardKeyUp);c.overlay.css("display","");c.modal.css("display","")}}}},b);var d=function(a,c,d){var e=b.animationsPriority[a][0],h=b.animationsPriority[a][1];b[e].animations[a](c,function(k){b[e].animations.internal[a](k);b[h].animations[a](c,function(e){b[h].animations.internal[a](e);b.callbacks[d](c,b.callbacks.internal[d])})})},c=a(b.overlay.selector);return this.each(function(){var e=a(this),f={modal:e,overlay:c};e.bind(b.eventsNames.show,function(){b.callbacks.beforeShow(f,b.callbacks.internal.beforeShow)&&(b.callbacks.positioning(f,b.callbacks.internal.positioning),d("show",f,"afterShow"))}).bind(b.eventsNames.hide,function(){b.callbacks.beforeHide(f,b.callbacks.internal.beforeHide)&&d("hide",f,"afterHide")})})}})})(jQuery,window,document);